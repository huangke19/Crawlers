# 搜狗微信爬虫



## 网页结构分析



1. #### 分页式布局

2. #### 一级页面抓索引，二级页面抓图片



## 爬虫设计

| 方法               | 函数              |
| :----------------- | :---------------- |
| 使用本机爬取索引页 | crawl_index_page  |
| 使用代理爬取索引页 | crawl_with_proxy  |
| 解析索引页         | parse_index_page  |
| 爬取并解析详情页   | crawl_detail_page |
| 存储到数据库       | store_to_mongo    |



## 反爬措施分析

1. #### 前10页不用登录，10页以后需要登录

   > 加cookie解决

2. #### 爬取频率限制

   > 换IP解决

3. #### 二级页面显示参数错误

   > 将url中的 & amp;替换成&

4. #### 验证码

   1. #### 换IP

   2. #### 随机延迟

   3. ####  换了IP还是被识别出来
      1. IP的Cookie应该是绑定的，以识别Cookie为主
      2. 获取验证码图片，保存到本地
      3. 用matplotlib显示图片
      4. 人工识别后输入验证码字母
      5. 重新获取Cookie替换原来的



